<div class="w-full min-h-full flex flex-col space-y-8 p-6 rounded-xl ">
  <div class="flex justify-between items-center">
    <h1 class="text-3xl font-bold back text-gray-800">معلومات المعوزة</h1>
    <p-button
      icon="pi pi-angle-left"
      [rounded]="true"
      [text]="true"
      [raised]="true"
      (onClick)="goBack()"
      label="رجوع"
    ></p-button>
  </div>

  <form class="space-y-6" [formGroup]="distituteForm" (ngSubmit)="submitForm()">
    <!-- Personal Information -->
    <div class="bg-white rounded-xl shadow-md p-6 space-y-6">
      <h2 class="text-xl font-semibold text-gray-800 border-b pb-3 border-gray-200">المعلومات الشخصية للزوجة</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Full Name -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">الاسم الكامل <span class="text-red-500">*</span></label>
          <input
            type="text"
            formControlName="full_name"
            placeholder="أدخل الاسم الكامل"
            [ngClass]="{
              'border-red-500': distituteForm.get('full_name')?.invalid &&
                              (distituteForm.get('full_name')?.dirty || distituteForm.get('full_name')?.touched)
            }"
            class="w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
          @if (distituteForm.get('full_name')?.invalid &&
          (distituteForm.get('full_name')?.dirty || distituteForm.get('full_name')?.touched)) {
            <div class="text-red-500 text-xs mt-1">
              @if (distituteForm.get('full_name')?.errors?.['required']) {
                <span>هذا الحقل مطلوب</span>
              }
              @if (distituteForm.get('full_name')?.errors?.['minlength']) {
                <span>يجب أن يكون الاسم 3 أحرف على الأقل</span>
              }
            </div>
          }
        </div>

        <!-- CIN -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">رقم البطاقة الوطنية <span class="text-red-500">*</span></label>
          <input
            type="text"
            formControlName="cin"
            placeholder="مثال: A123456"
            [ngClass]="{
              'border-red-500': distituteForm.get('cin')?.invalid &&
                              (distituteForm.get('cin')?.dirty || distituteForm.get('cin')?.touched)
            }"
            class="w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
          @if (distituteForm.get('cin')?.invalid &&
          (distituteForm.get('cin')?.dirty || distituteForm.get('cin')?.touched)) {
            <div class="text-red-500 text-xs mt-1">
              @if (distituteForm.get('cin')?.errors?.['required']) {
                <span>هذا الحقل مطلوب</span>
              }
            </div>
          }
        </div>

        <!-- Birth Date -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">تاريخ الميلاد <span class="text-red-500">*</span></label>
          <p-calendar
            formControlName="birth_date"
            [showIcon]="true"
            dateFormat="yy/mm/dd"
            placeholder="اختر تاريخ الميلاد"
            [ngClass]="{
              'border-red-500': distituteForm.get('birth_date')?.invalid &&
                              (distituteForm.get('birth_date')?.dirty || distituteForm.get('birth_date')?.touched)
            }"
          ></p-calendar>
          @if (distituteForm.get('birth_date')?.invalid &&
          (distituteForm.get('birth_date')?.dirty || distituteForm.get('birth_date')?.touched)) {
            <div class="text-red-500 text-xs mt-1">
              @if (distituteForm.get('birth_date')?.errors?.['required']) {
                <span>هذا الحقل مطلوب</span>
              }
            </div>
          }
        </div>

        <!-- Phone -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">رقم هاتف المعوزة</label>
          <input
            type="tel"
            formControlName="tel"
            placeholder="مثال: 0612345678"
            [ngClass]="{
              'border-red-500': distituteForm.get('tel')?.invalid &&
                              (distituteForm.get('tel')?.dirty || distituteForm.get('tel')?.touched)
            }"
              class="w-full text-right px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
          @if (distituteForm.get('tel')?.invalid &&
          (distituteForm.get('tel')?.dirty || distituteForm.get('tel')?.touched)) {
            <div class="text-red-500 text-xs mt-1">
              @if (distituteForm.get('tel')?.errors?.['pattern']) {
                <span>يجب أن يكون رقم هاتف مغربي صحيح (مثال: 0612345678)</span>
              }
            </div>
          }
        </div>
      </div>
    </div>

    <!-- Husband Information -->
    <div class="bg-white rounded-xl shadow-md p-6 space-y-6">
      <h2 class="text-xl font-semibold text-gray-800 border-b pb-3 border-gray-200">المعلومات الشخصية للزوج</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Husband Full Name -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">الاسم الكامل للزوج</label>
          <input
            type="text"
            formControlName="husband_full_name"
            placeholder="أدخل الاسم الكامل للزوج"
            [ngClass]="{
              'border-red-500': distituteForm.get('husband_full_name')?.invalid &&
                              (distituteForm.get('husband_full_name')?.dirty || distituteForm.get('husband_full_name')?.touched)
            }"
            class="w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
          @if (distituteForm.get('husband_full_name')?.invalid &&
          (distituteForm.get('husband_full_name')?.dirty || distituteForm.get('husband_full_name')?.touched)) {
            <div class="text-red-500 text-xs mt-1">
              @if (distituteForm.get('husband_full_name')?.errors?.['pattern']) {
                <span>يجب أن يحتوي على أحرف عربية فقط</span>
              }
            </div>
          }
        </div>

        <!-- Husband CIN -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">رقم البطاقة الوطنية للزوج</label>
          <input
            type="text"
            formControlName="husband_cin"
            placeholder="مثال: A123456"
            [ngClass]="{
              'border-red-500': distituteForm.get('husband_cin')?.invalid &&
                              (distituteForm.get('husband_cin')?.dirty || distituteForm.get('husband_cin')?.touched)
            }"
            class="w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
          @if (distituteForm.get('husband_cin')?.invalid &&
          (distituteForm.get('husband_cin')?.dirty || distituteForm.get('husband_cin')?.touched)) {
            <div class="text-red-500 text-xs mt-1">
              @if (distituteForm.get('husband_cin')?.errors?.['pattern']) {
                <span>يجب أن يبدأ بحرف متبوع بـ 6 أرقام</span>
              }
            </div>
          }
        </div>

        <!-- Husband Birth Date -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">تاريخ الميلاد للزوج</label>
          <p-calendar
            formControlName="husband_birth_date"
            [showIcon]="true"
            dateFormat="yy/mm/dd"
            placeholder="اختر تاريخ الميلاد"
          ></p-calendar>
        </div>

        <!-- Husband Phone -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">رقم هاتف الزوج</label>
          <input
            type="tel"
            formControlName="husband_tel"
            placeholder="مثال: 0612345678"
            [ngClass]="{
              'border-red-500': distituteForm.get('husband_tel')?.invalid &&
                              (distituteForm.get('husband_tel')?.dirty || distituteForm.get('husband_tel')?.touched)
            }"
            class="w-full text-right px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
          @if (distituteForm.get('husband_tel')?.invalid &&
          (distituteForm.get('husband_tel')?.dirty || distituteForm.get('husband_tel')?.touched)) {
            <div class="text-red-500 text-xs mt-1">
              @if (distituteForm.get('husband_tel')?.errors?.['pattern']) {
                <span>يجب أن يكون رقم هاتف مغربي صحيح (مثال: 0612345678)</span>
              }
            </div>
          }
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="flex justify-end mt-6">
      <p-button
        type="submit"
        label="حفظ البيانات"
        icon="pi pi-save"
        [loading]="loading"
        [disabled]="loading || distituteForm.invalid"
        severity="primary"
      ></p-button>
    </div>
  </form>
</div>
